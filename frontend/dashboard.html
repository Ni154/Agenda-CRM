<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard</title>

<link rel="stylesheet" href="css/style.css">

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="js/supabase.js"></script>

<style>
body{margin:0;font-family:Arial;background:#f4f4f4}

.sidebar{
 width:220px;
 height:100vh;
 background:white;
 position:fixed;
 box-shadow:2px 0 5px rgba(0,0,0,0.1);
 padding:20px;
}

.sidebar a{
 display:block;
 margin:10px 0;
 text-decoration:none;
 color:#333;
}

.content{
 margin-left:240px;
 padding:20px;
}

.cards{
 display:flex;
 gap:20px;
 margin-top:20px;
}

.card{
 background:white;
 padding:20px;
 border-radius:10px;
 flex:1;
 box-shadow:0 5px 10px rgba(0,0,0,0.1);
}

button{
 background:#C9A227;
 color:white;
 border:none;
 padding:10px;
 border-radius:5px;
 cursor:pointer;
}
</style>
</head>

<body>

<div class="sidebar">
<img src="assets/logo.png" style="width:150px">

<a href="clientes/clientes.html">Clientes</a>
<a href="agenda/agenda.html">Agenda</a>
<a href="vendas/vendas.html">Vendas</a>
<a href="estoque/produtos.html">Estoque</a>
<a href="financeiro/lancamentos.html">Financeiro</a>
<a href="financeiro/relatorios.html">Relat√≥rios</a>
<a href="backup/backup.html">Backup</a>

<button onclick="logout()">Sair</button>
</div>

<div class="content">

<h2>Dashboard</h2>

<div class="cards">
<div class="card">
<h3>Receita</h3>
<p id="receita">0</p>
</div>

<div class="card">
<h3>Despesa</h3>
<p id="despesa">0</p>
</div>

<div class="card">
<h3>Resultado</h3>
<p id="resultado">0</p>
</div>
</div>

</div>

<script>

async function logout(){
 await supabase.auth.signOut()
 window.location.href="index.html"
}

async function carregarDashboard(){

 const {data:rec}=await supabase.from("vw_receita_total").select("*").single()
 const {data:des}=await supabase.from("vw_despesa_total").select("*").single()
 const {data:res}=await supabase.from("vw_resultado").select("*").single()

 if(rec) receita.innerText=rec.receita_total
 if(des) despesa.innerText=des.despesa_total
 if(res) resultado.innerText=res.resultado
}

carregarDashboard()

</script>

</body>
</html>
